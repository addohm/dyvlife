{% extends "base.html" %}
{% load static %}
{% block morehead %}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock morehead %}
{% block maincontent %}
  <h1 class="text-center mb-4">Contact Us</h1>
  <p class="text-center mb-5"></p>
  <!-- Contact Form -->
  <form class="row g-3"
        enctype="multipart/form-data"
        method="post"
        id="contactForm">
    {% csrf_token %}
    <div class="col-md-6">
      {{ form.name.errors }}
      <label for="name" class="form-label">{{ form.name.label }}</label>
      {{ form.name }}
    </div>
    <div class="col-md-6">
      {{ form.email.errors }}
      <label for="email" class="form-label">{{ form.email.label }}</label>
      {{ form.email }}
    </div>
    <div class="col-12">
      {{ form.subject.errors }}
      <label for="subject" class="form-label">{{ form.subject.label }}</label>
      {{ form.subject }}
    </div>
    <div class="col-12">
      {{ form.message.errors }}
      <label for="message" class="form-label">{{ form.message.label }}</label>
      {{ form.message }}
    </div>
    <div class="col-12 text-center">
      <button type="submit"
              class="btn btn-dark brand-color-bg text-white"
              id="submitButton">
        <span id="submitText">Send Message</span>
        <span id="loadingSpinner"
              class="spinner-border spinner-border-sm d-none"
              role="status"
              aria-hidden="true"></span>
      </button>
    </div>
  </form>
{% endblock maincontent %}
{% block morescripts %}
  <script>
document.getElementById('contactForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const form = this;

  Swal.fire({
    title: 'Sending your message',
    html: 'Please wait...',
    timerProgressBar: true,
    didOpen: () => {
      Swal.showLoading();
      // Submit the form after showing the alert
      form.submit();
    },
    // This will close when the page redirects to /sent/
    allowOutsideClick: false
  });
});
  </script>
{% endblock morescripts %}
