{% extends "base.html" %}
{% load static %}
{% block maincontent %}
  <h1 class="text-center mb-4">Contact Us</h1>
  <p class="text-center mb-5"></p>
  <!-- Contact Form -->
  <form class="row g-3"
        enctype="multipart/form-data"
        method="post"
        id="contactForm">
    {% csrf_token %}
    <div class="col-md-6">
      {{ form.name.errors }}
      <label for="name" class="form-label">{{ form.name.label }}</label>
      {{ form.name }}
    </div>
    <div class="col-md-6">
      {{ form.email.errors }}
      <label for="email" class="form-label">{{ form.email.label }}</label>
      {{ form.email }}
    </div>
    <div class="col-12">
      {{ form.subject.errors }}
      <label for="subject" class="form-label">{{ form.subject.label }}</label>
      {{ form.subject }}
    </div>
    <div class="col-12">
      {{ form.message.errors }}
      <label for="message" class="form-label">{{ form.message.label }}</label>
      {{ form.message }}
    </div>
    <div class="col-12 text-center">
      <button type="submit"
              class="btn btn-dark brand-color-bg text-white"
              id="submitButton">
        <span id="submitText">Send Message</span>
        <span id="loadingSpinner"
              class="spinner-border spinner-border-sm d-none"
              role="status"
              aria-hidden="true"></span>
      </button>
    </div>
  </form>
{% endblock maincontent %}
{% block scripts %}
  <script>
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      // Show loading spinner and change button text
      document.getElementById('loadingSpinner').classList.remove('d-none');
      document.getElementById('submitText').textContent = 'Sending...';
      document.getElementById('submitButton').disabled = true;

      // The form will continue to submit normally
      // The redirect to /sent/ will happen after submission is complete
    });
  </script>
{% endblock scripts %}
